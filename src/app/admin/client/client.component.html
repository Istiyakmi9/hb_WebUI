<div class="main-container" [ngClass]="{'preload': !isClientFound}">
  <div class="col-md-12">
    <div class="col-12 u-header shadow curren-bg row m-0 my-3 align-items-center">
      <div class="col-md-3">
        <div class="d-inline-block c-tab" id="client-tab">
          <a class="a-tab tab-active" (click)="SwitchTab($event, 1)">
            Active
          </a>
        </div>
      </div>
      <div class="col-md-7 row m-0">
        <div class="col-md-10">
          <input type="text" class="form-control form-control-sm" (keydown.esc)="resetFilter()"
            (keyup.enter)="globalFilter()" placeholder="Search by any: (Client Name, Primary Contact No, Email)"
            [(ngModel)]="anyFilter">
          </div>
          <div class="col-md-2">
            <button class="btn btn-custom-pink" (click)="globalFilter()"
              (keydown.esc)="resetFilter()">
              <i class="fa-solid fa-filter"></i>
            </button>
            <button class="btn btn-danger ms-2" (click)="resetFilter()">
              <i class="fa-solid fa-arrow-rotate-right"></i>
            </button>
          </div>
        </div>

        <div class="col-md-2 inline-row d-r p-0 m-0">
          <div class="">
            <button class="btn btn-custom-pink" (click)="navtoRegisterClient()"
              routerLinkActive="router-link-active"> <i class="fa-regular fa-square-plus ps-2" aria-hidden="true"></i>Add
            Client</button>
          </div>
        </div>
      </div>
      <div class="x_panel">
        <div class="x_header">
          <div class="d-flex justify-content-between">
            <div class="col-8">
              <div class="px-1">
                <app-breadcrums [title]="'Client detail'" [subtitle]="'Add or update details'"></app-breadcrums>
              </div>
            </div>
          </div>
        </div>
        <div>
          @switch (isClientFound) {
            @case (false) {
              <div>
                <div class="mt-5">
                  <app-pre-load-table></app-pre-load-table>
                </div>
              </div>
            }
            @default {
              <div>
                <ng-container>
                  <div class="x_content">
                    <div class="t-table t-list col-md-12">
                      <div class="t-head">
                        <div class="tr">
                          <div class="th fe-index">
                            <div class="t-filter t-index">
                              <a href="javascript:void()" class="ps-3">#</a>
                            </div>
                          </div>
                          <div class="th fe-3">
                            <div class="cell-wrapper">
                              <input class="form-control form-control-sm" (keydown.esc)="resetFilter()"
                                (keyup.enter)="filterRecords()" [(ngModel)]="clientDetails.CompanyName"
                                placeholder="Search by Name">
                                <div class="t-filter" (click)="arrangeDetails(orderByNameAsc, 'CompanyName')">
                                  <a href="javascript:void()" class="pe-2">Company Name</a>
                                  <i class="fa-solid fa-arrow-down-wide-short"
                                  [ngClass]="{'d-none': orderByNameAsc == null || !orderByNameAsc }" aria-hidden="true"></i>
                                  <i class="fa-solid fa-arrow-down-short-wide"
                                  [ngClass]="{'d-none': orderByNameAsc == null || orderByNameAsc }" aria-hidden="true"></i>
                                </div>
                              </div>
                            </div>
                            <div class="th fe-2">
                              <div class="cell-wrapper">
                                <input class="form-control form-control-sm" (keyup.enter)="filterRecords()"
                                  (keydown.esc)="resetFilter()" [(ngModel)]="clientDetails.Mobile"
                                  placeholder="Search by Contact no">
                                  <div class="t-filter" (click)="arrangeDetails(orderByMobileAsc, 'Mobile')">
                                    <a href="javascript:void()" class="pe-2">Contact No.#</a>
                                    <i class="fa-solid fa-arrow-down-wide-short"
                                      [ngClass]="{'d-none': orderByMobileAsc == null || !orderByMobileAsc }"
                                    aria-hidden="true"></i>
                                    <i class="fa-solid fa-arrow-down-short-wide"
                                      [ngClass]="{'d-none': orderByMobileAsc == null || orderByMobileAsc }"
                                    aria-hidden="true"></i>
                                  </div>
                                </div>
                              </div>
                              <div class="th fe-2">
                                <div class="cell-wrapper">
                                  <input class="form-control form-control-sm" (keyup.enter)="filterRecords()"
                                    (keydown.esc)="resetFilter()" [(ngModel)]="clientDetails.Email" placeholder="Search by Email">
                                    <div class="t-filter" (click)="arrangeDetails(orderByEmailAsc, 'Email')">
                                      <a href="javascript:void()" class="pe-2">Email</a>
                                      <i class="fa-solid fa-arrow-down-wide-short"
                                      [ngClass]="{'d-none': orderByEmailAsc == null || !orderByEmailAsc }" aria-hidden="true"></i>
                                      <i class="fa-solid fa-arrow-down-short-wide"
                                      [ngClass]="{'d-none': orderByEmailAsc == null || orderByEmailAsc }" aria-hidden="true"></i>
                                    </div>
                                  </div>
                                </div>
                                <div class="th fe-1">
                                  <div class="cell-wrapper">
                                    <select class="form-select form-select-sm" [(ngModel)]="clientDetails.ClientTypeId" (change)="filterRecords()">
                                      <option value="0">Select CLient Type</option>
                                      <option value="1">Actual Client</option>
                                      <option value="2">Vendor</option>
                                      <option value="3">Agent</option>
                                    </select>
                                    <div class="t-filter" (click)="arrangeDetails(orderByClientTypeAsc, 'ClientTypeId')">
                                      <a href="javascript:void()" class="pe-3">Client Type</a>
                                      <i class="fa-solid fa-arrow-down-wide-short"
                                      [ngClass]="{'d-none': orderByClientTypeAsc == null || !orderByClientTypeAsc }" aria-hidden="true"></i>
                                      <i class="fa-solid fa-arrow-down-short-wide"
                                      [ngClass]="{'d-none': orderByClientTypeAsc == null || orderByClientTypeAsc }" aria-hidden="true"></i>
                                    </div>
                                  </div>
                                </div>
                                <div class="th fe-2">
                                  <div class="cell-wrapper">
                                    <input class="form-control form-control-sm" (keyup.enter)="filterRecords()"
                                      (keydown.esc)="resetFilter()" [(ngModel)]="clientDetails.Address"
                                      placeholder="Search by Address">
                                      <div class="t-filter" (click)="arrangeDetails(orderByAddressAsc, 'Address')">
                                        <a href="javascript:void()" class="pe-3">Address</a>
                                        <i class="fa-solid fa-arrow-down-wide-short"
                                          [ngClass]="{'d-none': orderByAddressAsc == null || !orderByAddressAsc }"
                                        aria-hidden="true"></i>
                                        <i class="fa-solid fa-arrow-down-short-wide"
                                          [ngClass]="{'d-none': orderByAddressAsc == null || orderByAddressAsc }"
                                        aria-hidden="true"></i>
                                      </div>
                                    </div>
                                  </div>
                                  <div class="th fe-1 text-center">
                                    <a href="javascript:void(0)" class="text-decoration-none text-success ps-1 fw-bold" (click)="filterRecords()">
                                      <i class="fa-solid fa-filter">
                                      </i>
                                      <span class="ms-1">Filter</span>
                                    </a>
                                    <div class="t-filter d-block text-center">
                                      <a href="javascript:void(0)">ACTIONS</a>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="t-body">
                                @if (clients.length > 0) {
                                  @for (clients of clients; track clients; let i = $index) {
                                    <div class="tr py-2">
                                      <div class="td align-middle text-center fe-index">{{i+1}}</div>
                                      <div class="td align-middle fe-3">
                                        <div class="cell-wrapper">
                                          <a href="javascript:void(0)" (click)="EditCurrent(clients)" class="client-name-link">
                                            {{clients.companyName}}
                                          </a>
                                        </div>
                                      </div>
                                      <div class="td align-middle fe-2">
                                        <div class="cell-wrapper">
                                          {{clients.mobile}}
                                        </div>
                                      </div>
                                      <div class="td align-middle fe-2">
                                        <div class="cell-wrapper">
                                          {{clients.email}}
                                        </div>
                                      </div>
                                      <div class="td align-middle fe-1">
                                        <div class="cell-wrapper">
                                          {{clients.clientTypeId == 1 ? 'Actual Client' : clients.clientTypeId == 2 ? 'Vendor' : 'Agent'}}
                                        </div>
                                      </div>
                                      <div class="td align-middle fe-2">
                                        <div class="cell-wrapper">
                                          {{clients.address}}
                                        </div>
                                      </div>
                                      <div class="td align-middle fe-1">
                                        <div class=" d-flex flex-row justify-content-evenly">
                                          <a href="javascript:void(0)" (click)="EditCurrent(clients)">
                                            <span class="badge bg-success"><i class="fa-regular fa-pen-to-square" aria-hidden="true"></i></span>
                                          </a>
                                        </div>
                                      </div>
                                    </div>
                                  }
                                }
                              </div>
                              @if (clients.length == 0) {
                                <div class="custom-height my-5 py-5 d-flex align-items-center justify-content-center">
                                  <p class="my-5 py-5 text-danger fs-2 fw-bold">Record Not Found</p>
                                </div>
                              }
                            </div>
                          </div>
                          <div class="mt-3">
                            <app-pagination [pagination]="clientsData" (onPageChange)="GetFilterResult($event)"></app-pagination>
                          </div>
                        </ng-container>
                      </div>
                    }
                  }
                </div>
              </div>
            </div>
          </div>
